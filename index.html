<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Krishi Mithram - Kerala Agricultural Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-green: #27ae60;
            --light-green: #2ecc71;
            --dark-green: #219653;
            --secondary-yellow: #f1c40f;
            --warning-red: #e74c3c;
            --info-blue: #3498db;
            --light-bg: #f8f9fa;
            --white: #ffffff;
            --gray: #7f8c8d;
            --dark-gray: #34495e;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            --shadow-light: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Noto Sans', sans-serif;
        }

        body {
            background-color: var(--light-bg);
            color: var(--dark-gray);
            line-height: 1.6;
            font-size: 16px;
        }

        /* Welcome Screen - Interactive Landing Page */
        #welcomeScreen {
            min-height: 100vh;
            background: linear-gradient(rgba(39, 174, 96, 0.9), rgba(33, 150, 83, 0.9)), 
                        url('https://images.unsplash.com/photo-1500382017468-9049fed747ef?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80');
            background-size: cover;
            background-position: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            text-align: center;
            color: white;
        }

        .welcome-container {
            max-width: 900px;
            width: 100%;
            animation: fadeIn 1s ease-out;
        }

        .app-logo {
            margin-bottom: 1.5rem;
        }

        .app-logo i {
            font-size: 5rem;
            margin-bottom: 1rem;
            color: white;
            filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.2));
        }

        .app-logo h1 {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            letter-spacing: 1px;
        }

        .app-logo p {
            font-size: 1.4rem;
            opacity: 0.9;
            margin-bottom: 2rem;
        }

        .welcome-tagline {
            font-size: 1.3rem;
            margin-bottom: 3rem;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.8;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s, background 0.3s;
            cursor: pointer;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            background: rgba(255, 255, 255, 0.25);
        }

        .feature-card i {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--secondary-yellow);
        }

        .feature-card h3 {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
        }

        .get-started-btn {
            background-color: var(--secondary-yellow);
            color: var(--dark-gray);
            border: none;
            padding: 1.2rem 3rem;
            border-radius: 50px;
            font-size: 1.4rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            margin-top: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            margin-left: auto;
            margin-right: auto;
        }

        .get-started-btn:hover {
            background-color: white;
            transform: scale(1.05);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }

        .language-selector {
            margin-top: 3rem;
            display: flex;
            justify-content: center;
            gap: 1rem;
        }

        .lang-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 30px;
            cursor: pointer;
            transition: background 0.3s;
            font-size: 1rem;
        }

        .lang-btn:hover, .lang-btn.active {
            background: rgba(255, 255, 255, 0.4);
        }

        .login-container {
            display: none;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--light-green) 0%, var(--primary-green) 100%);
            padding: 2rem;
            align-items: center;
            justify-content: center;
        }

        .login-box {
            background-color: var(--white);
            border-radius: 20px;
            box-shadow: var(--shadow);
            width: 100%;
            max-width: 500px;
            padding: 2.5rem;
            animation: slideUp 0.5s ease-out;
        }

        .login-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .login-header h2 {
            color: var(--primary-green);
            font-size: 2.2rem;
            margin-bottom: 0.5rem;
        }

        .login-header p {
            color: var(--gray);
            font-size: 1.1rem;
        }

        .user-type-selector {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .user-type-btn {
            padding: 1.5rem;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            background-color: #f9f9f9;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.8rem;
        }

        .user-type-btn:hover {
            border-color: var(--primary-green);
            background-color: rgba(39, 174, 96, 0.05);
            transform: translateY(-5px);
        }

        .user-type-btn.active {
            border-color: var(--primary-green);
            background-color: rgba(39, 174, 96, 0.1);
            box-shadow: var(--shadow-light);
        }

        .user-type-btn i {
            font-size: 2.5rem;
            color: var(--primary-green);
        }

        .user-type-btn div {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--dark-gray);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--dark-gray);
            font-size: 1.1rem;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1.1rem;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-green);
        }

        .btn {
            background-color: var(--primary-green);
            color: white;
            border: none;
            padding: 1.2rem;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.8rem;
        }

        .btn:hover {
            background-color: var(--dark-green);
        }

        .btn-secondary {
            background-color: #f0f0f0;
            color: var(--dark-gray);
        }

        .btn-secondary:hover {
            background-color: #e0e0e0;
        }

        .back-btn {
            background: none;
            border: none;
            color: var(--primary-green);
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            padding: 0.5rem 0;
        }

        /* Main App Styles */
        #appContainer {
            display: none;
        }

        header {
            background: linear-gradient(to right, var(--dark-green), var(--primary-green));
            color: white;
            padding: 1.2rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 1.2rem;
        }

        .logo {
            font-size: 2.8rem;
        }

        .logo-text h1 {
            font-size: 1.8rem;
            margin-bottom: 0.2rem;
        }

        .logo-text p {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1.2rem;
        }

        .badge {
            background-color: var(--secondary-yellow);
            color: var(--dark-green);
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            font-size: 1rem;
        }

        .badge.farmer {
            background-color: var(--light-green);
            color: white;
        }

        .badge.business {
            background-color: #e67e22;
            color: white;
        }

        .badge.citizen {
            background-color: var(--info-blue);
            color: white;
        }

        .badge.official {
            background-color: #9b59b6;
            color: white;
        }

        .profile-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-size: 1rem;
        }

        nav {
            background-color: var(--white);
            padding: 0.8rem 2rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            display: flex;
            gap: 1.5rem;
            overflow-x: auto;
        }

        .nav-item {
            color: var(--gray);
            text-decoration: none;
            font-weight: 500;
            padding: 0.8rem 0;
            border-bottom: 4px solid transparent;
            transition: all 0.3s;
            white-space: nowrap;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .nav-item:hover, .nav-item.active {
            color: var(--primary-green);
            border-bottom-color: var(--primary-green);
        }

        .container {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 2rem;
            margin-top: 1.5rem;
        }

        .card {
            background-color: var(--white);
            border-radius: 15px;
            padding: 1.8rem;
            box-shadow: var(--shadow-light);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow);
        }

        .card h3 {
            color: var(--primary-green);
            margin-bottom: 1.2rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            font-size: 1.4rem;
        }

        .card-icon {
            background-color: rgba(39, 174, 96, 0.1);
            color: var(--primary-green);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .alert {
            padding: 1.2rem;
            border-radius: 10px;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1.2rem;
            font-size: 1.1rem;
        }

        .alert.warning {
            background-color: rgba(231, 76, 60, 0.1);
            border-left: 5px solid var(--warning-red);
        }

        .alert.info {
            background-color: rgba(52, 152, 219, 0.1);
            border-left: 5px solid var(--info-blue);
        }

        .alert.success {
            background-color: rgba(46, 204, 113, 0.1);
            border-left: 5px solid var(--light-green);
        }

        .section {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .section.active {
            display: block;
        }

        .section h2 {
            color: var(--dark-green);
            margin-bottom: 1.5rem;
            font-size: 2rem;
            border-bottom: 3px solid var(--light-green);
            padding-bottom: 0.5rem;
        }

        /* Chatbot Styles */
        .chatbot-container {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 1000;
        }

        .chatbot-btn {
            background: linear-gradient(135deg, var(--primary-green), var(--dark-green));
            color: white;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            cursor: pointer;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s;
        }

        .chatbot-btn:hover {
            transform: scale(1.1);
        }

        .chatbot-window {
            position: absolute;
            bottom: 85px;
            right: 0;
            width: 380px;
            height: 550px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
            display: none;
            flex-direction: column;
            overflow: hidden;
        }

        .chatbot-header {
            background: linear-gradient(to right, var(--primary-green), var(--dark-green));
            color: white;
            padding: 1.2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chatbot-messages {
            flex: 1;
            padding: 1.2rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .message {
            max-width: 85%;
            padding: 1rem;
            border-radius: 15px;
            font-size: 1.1rem;
        }

        .message.user {
            align-self: flex-end;
            background-color: #e8f5e9;
            border-bottom-right-radius: 5px;
        }

        .message.bot {
            align-self: flex-start;
            background-color: #f5f5f5;
            border-bottom-left-radius: 5px;
        }

        .chatbot-input {
            padding: 1.2rem;
            border-top: 1px solid #eee;
            display: flex;
            gap: 0.8rem;
        }

        .chatbot-input input {
            flex: 1;
            padding: 1rem;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1.1rem;
        }

        .chatbot-input button {
            background-color: var(--primary-green);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 0 1.5rem;
            cursor: pointer;
            font-size: 1.2rem;
        }

        /* Form Section Styles */
        .form-section {
            display: none;
        }

        .form-section.active {
            display: block;
        }

        /* Community Post Styles */
        .post {
            background-color: var(--white);
            border-radius: 15px;
            padding: 1.8rem;
            margin-bottom: 1.8rem;
            box-shadow: var(--shadow-light);
        }

        .post-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.2rem;
        }

        .post-author {
            display: flex;
            align-items: center;
            gap: 1.2rem;
        }

        .post-content {
            margin-bottom: 1.2rem;
            font-size: 1.1rem;
            line-height: 1.7;
        }

        .post-actions {
            display: flex;
            gap: 1.5rem;
        }

        .action-btn {
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-size: 1rem;
            padding: 0.5rem;
            border-radius: 5px;
            transition: all 0.3s;
        }

        .action-btn:hover {
            color: var(--primary-green);
            background-color: rgba(39, 174, 96, 0.1);
        }

        /* Responsive Styles */
        @media (max-width: 992px) {
            .features-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .app-logo h1 {
                font-size: 2.8rem;
            }
        }

        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            nav {
                padding: 0.8rem 1rem;
                gap: 1rem;
            }
            
            .container {
                padding: 1.5rem;
            }
            
            .chatbot-window {
                width: 320px;
                right: -50px;
            }
            
            .user-type-selector {
                grid-template-columns: 1fr;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
            
            .app-logo h1 {
                font-size: 2.5rem;
            }
            
            .welcome-tagline {
                font-size: 1.2rem;
            }
        }

        @media (max-width: 480px) {
            .app-logo h1 {
                font-size: 2.2rem;
            }
            
            .get-started-btn {
                padding: 1rem 2rem;
                font-size: 1.2rem;
            }
            
            .login-box {
                padding: 1.8rem;
            }
            
            header {
                padding: 1rem;
                flex-direction: column;
                gap: 1rem;
            }
            
            .user-info {
                width: 100%;
                justify-content: center;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--light-green);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-green);
        }
    </style>
</head>
<body>
    <!-- Welcome Screen - Interactive Landing Page -->
    <div id="welcomeScreen">
        <div class="welcome-container">
            <div class="app-logo">
                <i class="fas fa-hands-helping pulse"></i>
                <h1>Krishi Mithram</h1>
                <p>കൃഷി മിത്രം - കേരളത്തിന്റെ കാർഷിക വികസന പ്ലാറ്റ്ഫോം</p>
            </div>
            
            <div class="welcome-tagline">
                Connecting Farmers, Businesses, Citizens & Government Departments of Kerala. 
                A unified platform for agricultural growth, market access, and disaster management.
            </div>
            
            <div class="features-grid">
                <div class="feature-card" onclick="showFeatureInfo('panchayat')">
                    <i class="fas fa-map-marked-alt"></i>
                    <h3>Panchayat Mapping</h3>
                    <p>Interactive maps with soil, water, and crop data</p>
                </div>
                
                <div class="feature-card" onclick="showFeatureInfo('crop')">
                    <i class="fas fa-seedling"></i>
                    <h3>Crop Recommendations</h3>
                    <p>AI-powered suggestions based on climate & market</p>
                </div>
                
                <div class="feature-card" onclick="showFeatureInfo('market')">
                    <i class="fas fa-shopping-cart"></i>
                    <h3>Business Platform</h3>
                    <p>Buy/sell produce, fertilizers, and lease land</p>
                </div>
                
                <div class="feature-card" onclick="showFeatureInfo('disaster')">
                    <i class="fas fa-shield-alt"></i>
                    <h3>Disaster Alerts</h3>
                    <p>Real-time alerts and emergency services</p>
                </div>
                
                <div class="feature-card" onclick="showFeatureInfo('community')">
                    <i class="fas fa-users"></i>
                    <h3>Community Support</h3>
                    <p>Connect with farmers and agricultural officers</p>
                </div>
                
                <div class="feature-card" onclick="showFeatureInfo('ai')">
                    <i class="fas fa-robot"></i>
                    <h3>AI Assistant</h3>
                    <p>Voice-enabled chatbot with photo support</p>
                </div>
            </div>
            
            <button class="get-started-btn" onclick="showLoginScreen()">
                <i class="fas fa-play-circle"></i>
                Get Started Now
            </button>
            
            <div class="language-selector">
                <button class="lang-btn active" onclick="changeLanguage('en')">English</button>
                <button class="lang-btn" onclick="changeLanguage('ml')">മലയാളം</button>
                <button class="lang-btn" onclick="changeLanguage('hi')">हिन्दी</button>
            </div>
        </div>
    </div>
    
    <!-- Login Screen -->
    <div id="loginScreen" class="login-container">
        <div class="login-box">
            <button class="back-btn" onclick="showWelcomeScreen()">
                <i class="fas fa-arrow-left"></i> Back to Home
            </button>
            
            <div class="login-header">
                <h2>Krishi Mithram</h2>
                <p>Login to access agricultural services</p>
            </div>
            
            <div class="user-type-selector">
                <div class="user-type-btn" onclick="selectUserType('farmer')">
                    <i class="fas fa-tractor"></i>
                    <div>Farmer</div>
                    <small>കൃഷിക്കാരൻ</small>
                </div>
                <div class="user-type-btn" onclick="selectUserType('business')">
                    <i class="fas fa-briefcase"></i>
                    <div>Business</div>
                    <small>വ്യവസായം</small>
                </div>
                <div class="user-type-btn" onclick="selectUserType('citizen')">
                    <i class="fas fa-user"></i>
                    <div>Citizen</div>
                    <small>പൗരൻ</small>
                </div>
                <div class="user-type-btn" onclick="selectUserType('official')">
                    <i class="fas fa-landmark"></i>
                    <div>Government Official</div>
                    <small>സർക്കാർ ഉദ്യോഗസ്ഥൻ</small>
                </div>
            </div>
            
            <div id="farmerForm" class="form-section">
                <h3 style="color: var(--primary-green); margin-bottom: 1.5rem;">Farmer Login</h3>
                <div class="form-group">
                    <label><i class="fas fa-id-card"></i> Kisan ID / Aadhar ID</label>
                    <input type="text" id="kisanId" placeholder="Enter your Kisan ID or Aadhar ID">
                </div>
                <div class="form-group">
                    <label><i class="fas fa-lock"></i> Password</label>
                    <input type="password" id="farmerPassword" placeholder="Enter your password">
                </div>
                <button class="btn" onclick="login('farmer')">
                    <i class="fas fa-sign-in-alt"></i>
                    Login as Farmer
                </button>
                <p style="text-align: center; margin-top: 1rem; color: var(--gray);">Demo: Use any ID and password</p>
            </div>
            
            <div id="businessForm" class="form-section">
                <h3 style="color: var(--primary-green); margin-bottom: 1.5rem;">Business Login</h3>
                <div class="form-group">
                    <label><i class="fas fa-file-contract"></i> Business License ID</label>
                    <input type="text" id="businessId" placeholder="Enter Business License ID">
                </div>
                <div class="form-group">
                    <label><i class="fas fa-lock"></i> Password</label>
                    <input type="password" id="businessPassword" placeholder="Enter your password">
                </div>
                <button class="btn" onclick="login('business')">
                    <i class="fas fa-sign-in-alt"></i>
                    Login as Business
                </button>
            </div>
            
            <div id="citizenForm" class="form-section">
                <h3 style="color: var(--primary-green); margin-bottom: 1.5rem;">Citizen Login</h3>
                <div class="form-group">
                    <label><i class="fas fa-envelope"></i> Email Address</label>
                    <input type="email" id="citizenEmail" placeholder="Enter your email address">
                </div>
                <div class="form-group">
                    <label><i class="fas fa-lock"></i> Password</label>
                    <input type="password" id="citizenPassword" placeholder="Enter your password">
                </div>
                <button class="btn" onclick="login('citizen')">
                    <i class="fas fa-sign-in-alt"></i>
                    Login as Citizen
                </button>
            </div>
            
            <div id="officialForm" class="form-section">
                <h3 style="color: var(--primary-green); margin-bottom: 1.5rem;">Government Official Login</h3>
                <div class="form-group">
                    <label><i class="fas fa-id-badge"></i> Government Email / ID</label>
                    <input type="text" id="officialId" placeholder="Enter Government Email or ID">
                </div>
                <div class="form-group">
                    <label><i class="fas fa-user-tag"></i> Role</label>
                    <select id="officialRole">
                        <option value="agri_officer">Agricultural Officer</option>
                        <option value="dept_head">Department Head</option>
                        <option value="panchayat_member">Panchayat Member</option>
                        <option value="field_officer">Field Officer</option>
                    </select>
                </div>
                <div class="form-group">
                    <label><i class="fas fa-lock"></i> Password</label>
                    <input type="password" id="officialPassword" placeholder="Enter your password">
                </div>
                <button class="btn" onclick="login('official')">
                    <i class="fas fa-sign-in-alt"></i>
                    Login as Official
                </button>
            </div>
        </div>
    </div>
    
    <!-- Main App -->
    <div id="appContainer" style="display: none;">
        <!-- Header -->
        <header>
            <div class="logo-container">
                <div class="logo">
                    <i class="fas fa-hands-helping"></i>
                </div>
                <div class="logo-text">
                    <h1>Krishi Mithram</h1>
                    <p>കൃഷി മിത്രം - Kerala's Agricultural Platform</p>
                </div>
            </div>
            
            <div class="user-info">
                <div id="userBadge" class="badge">User</div>
                <button class="profile-btn" onclick="showProfile()">
                    <i class="fas fa-user-circle"></i>
                    <span id="userName">User Name</span>
                </button>
                <button class="profile-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    Logout
                </button>
            </div>
        </header>
        
        <!-- Navigation -->
        <nav>
            <a href="#" class="nav-item active" onclick="showSection('dashboard')">
                <i class="fas fa-home"></i> Dashboard
            </a>
            <a href="#" class="nav-item" onclick="showSection('panchayatMap')">
                <i class="fas fa-map-marked-alt"></i> Panchayat Mapping
            </a>
            <a href="#" class="nav-item" onclick="showSection('cropRecommendation')">
                <i class="fas fa-seedling"></i> Crop Recommendations
            </a>
            <a href="#" class="nav-item" onclick="showSection('disasterAlerts')">
                <i class="fas fa-exclamation-triangle"></i> Disaster Alerts
            </a>
            <a href="#" class="nav-item" onclick="showSection('community')">
                <i class="fas fa-users"></i> Community
            </a>
            <a href="#" class="nav-item" onclick="showSection('business')">
                <i class="fas fa-shopping-cart"></i> Business Platform
            </a>
            <a href="#" class="nav-item" onclick="showSection('emergency')">
                <i class="fas fa-phone-alt"></i> Emergency
            </a>
        </nav>
        
        <!-- Main Content -->
        <div class="container">
            <!-- Dashboard Section -->
            <div id="dashboardSection" class="section active">
                <h2>Welcome to Krishi Mithram</h2>
                <div class="alert success">
                    <i class="fas fa-info-circle"></i>
                    <div>Welcome to Krishi Mithram. Update your profile data every 6 months to keep information current.</div>
                </div>
                
                <div class="dashboard">
                    <div class="card">
                        <h3><div class="card-icon"><i class="fas fa-map-marked-alt"></i></div> Panchayat Mapping</h3>
                        <p>View geographical maps and agricultural data for your panchayat. Check soil type, water availability, and suitable crops.</p>
                        <button class="btn" style="margin-top: 1rem;" onclick="showSection('panchayatMap')">Explore Maps</button>
                    </div>
                    
                    <div class="card">
                        <h3><div class="card-icon"><i class="fas fa-cloud-sun-rain"></i></div> Weather & Forecast</h3>
                        <p>Real-time weather updates, rainfall forecast, and climate-based crop suggestions for your region.</p>
                        <div style="margin-top: 1rem;">
                            <p><strong>Today:</strong> Partly cloudy, 28°C</p>
                            <p><strong>Rainfall:</strong> 70% chance, 15mm expected</p>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3><div class="card-icon"><i class="fas fa-robot"></i></div> AI Crop Advisor</h3>
                        <p>Get personalized crop recommendations based on soil, climate, and market demand. Upload photos for disease diagnosis.</p>
                        <button class="btn" style="margin-top: 1rem;" onclick="openChatbot()">Ask AI Assistant</button>
                    </div>
                    
                    <div class="card">
                        <h3><div class="card-icon"><i class="fas fa-bullhorn"></i></div> Government Alerts</h3>
                        <p>Official announcements from Agricultural Department and Panchayats.</p>
                        <div style="margin-top: 1rem;">
                            <p><strong>New:</strong> Subsidy for organic fertilizers</p>
                            <p><strong>Alert:</strong> Rainfall warning for Thrissur</p>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3><div class="card-icon"><i class="fas fa-chart-line"></i></div> Market Prices</h3>
                        <p>Current market rates for major crops in Kerala.</p>
                        <div style="margin-top: 1rem;">
                            <p><strong>Rice:</strong> ₹28/kg</p>
                            <p><strong>Coconut:</strong> ₹35/kg</p>
                            <p><strong>Banana:</strong> ₹22/kg</p>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3><div class="card-icon"><i class="fas fa-calendar-alt"></i></div> Update Reminder</h3>
                        <p>Your profile data was last updated on <span id="lastUpdate">Not updated yet</span></p>
                        <p style="margin-top: 1rem;">Update your land, crop, and business details every 6 months.</p>
                        <button class="btn" style="margin-top: 1rem;" onclick="showProfile()">Update Profile Now</button>
                    </div>
                </div>
            </div>
            
            <!-- Panchayat Mapping Section -->
            <div id="panchayatMapSection" class="section">
                <h2>Panchayat Mapping</h2>
                <div class="alert info">
                    <i class="fas fa-info-circle"></i>
                    <div>Panchayats can update geographical and agricultural data. Citizens can view crop suitability and soil information.</div>
                </div>
                
                <div class="form-group" style="margin-bottom: 2rem;">
                    <label><i class="fas fa-map-pin"></i> Select Panchayat</label>
                    <select id="panchayatSelect" onchange="loadPanchayatData()">
                        <option value="alappuzha">Alappuzha Municipality</option>
                        <option value="kuttanad">Kuttanad Panchayat</option>
                        <option value="wayanad">Wayanad Tribal Panchayat</option>
                        <option value="palakkad">Palakkad Grama Panchayat</option>
                    </select>
                </div>
                
                <div class="card">
                    <h3><i class="fas fa-map"></i> Panchayat Agricultural Data</h3>
                    <div id="panchayatData">
                        <p><strong>Soil Type:</strong> Alluvial soil</p>
                        <p><strong>Water Availability:</strong> High (Riverine area)</p>
                        <p><strong>Primary Crops:</strong> Rice, Coconut, Banana</p>
                        <p><strong>Fertility Level:</strong> High</p>
                        <p><strong>Rainfall Pattern:</strong> 3000mm annually</p>
                    </div>
                    
                    <div style="margin-top: 2rem;">
                        <h4>Map Visualization</h4>
                        <div style="background-color: #e8f5e9; height: 200px; border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-top: 1rem;">
                            <i class="fas fa-map" style="font-size: 3rem; color: var(--primary-green);"></i>
                            <div style="margin-left: 1rem;">
                                <p>Interactive map would appear here</p>
                                <p><small>Showing: Crop zones, Water sources, Soil types</small></p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Government Officials can edit this data -->
                    <div id="editPanchayatData" style="display: none; margin-top: 2rem;">
                        <h4>Update Panchayat Data (Officials Only)</h4>
                        <div class="form-group">
                            <label>Soil Type</label>
                            <input type="text" id="soilType" value="Alluvial soil">
                        </div>
                        <div class="form-group">
                            <label>Water Availability</label>
                            <select id="waterAvailability">
                                <option>High</option>
                                <option>Medium</option>
                                <option>Low</option>
                            </select>
                        </div>
                        <button class="btn">Update Panchayat Data</button>
                    </div>
                </div>
            </div>
            
            <!-- Crop Recommendation Section -->
            <div id="cropRecommendationSection" class="section">
                <h2>Crop Recommendations</h2>
                
                <div class="card" style="margin-bottom: 2rem;">
                    <h3><i class="fas fa-cloud-sun-rain"></i> Climate-Based Recommendations</h3>
                    <p><strong>Current Season:</strong> Monsoon (June-September)</p>
                    <p><strong>Recommended Crops:</strong> Rice, Tapioca, Banana</p>
                    <p><strong>Market Demand:</strong> High for Organic Vegetables</p>
                    <p><strong>Government Suggestion:</strong> Focus on paddy cultivation with new HYV seeds</p>
                </div>
                
                <div class="card">
                    <h3><i class="fas fa-robot"></i> AI-Powered Crop Advisor</h3>
                    <div class="form-group">
                        <label>Select Your Land Type</label>
                        <select id="landType">
                            <option>Wetland</option>
                            <option>Dryland</option>
                            <option>Garden Land</option>
                            <option>Hilly Area</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Soil Type</label>
                        <select id="soilTypeSelect">
                            <option>Alluvial</option>
                            <option>Laterite</option>
                            <option>Red Soil</option>
                            <option>Black Soil</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Water Availability</label>
                        <select id="waterAvail">
                            <option>High (River/Canal)</option>
                            <option>Medium (Well/Pond)</option>
                            <option>Low (Rainfed only)</option>
                        </select>
                    </div>
                    
                    <button class="btn" onclick="getCropRecommendation()">Get AI Recommendation</button>
                    
                    <div id="aiRecommendation" style="margin-top: 2rem; padding: 1.5rem; background-color: #f1f8e9; border-radius: 10px; display: none;">
                        <h4>AI Recommendation</h4>
                        <p><strong>Recommended Crop:</strong> <span id="recommendedCrop">Rice</span></p>
                        <p><strong>Reason:</strong> <span id="recommendationReason">Suitable for wetland with high water availability during monsoon</span></p>
                        <p><strong>Expected Yield:</strong> 3-4 tons per acre</p>
                        <p><strong>Market Price Forecast:</strong> ₹28-32 per kg</p>
                    </div>
                </div>
            </div>
            
            <!-- Disaster Alerts Section -->
            <div id="disasterAlertsSection" class="section">
                <h2>Disaster Alerts & Management</h2>
                
                <div class="alert warning">
                    <i class="fas fa-exclamation-triangle"></i>
                    <div><strong>Active Alert:</strong> Heavy rainfall warning for Alappuzha, Kottayam districts. Flood possibility in low-lying areas.</div>
                </div>
                
                <div class="dashboard">
                    <div class="card">
                        <h3><i class="fas fa-bell"></i> Real-time Alerts</h3>
                        <div style="margin-top: 1rem;">
                            <p><strong>Location:</strong> Kuttanad Panchayat</p>
                            <p><strong>Alert:</strong> Flood Warning Level 2</p>
                            <p><strong>Time:</strong> 2 hours ago</p>
                            <p><strong>Advice:</strong> Move equipment to higher ground</p>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3><i class="fas fa-history"></i> Disaster History</h3>
                        <div class="form-group" style="margin-top: 1rem;">
                            <label>Select Location</label>
                            <select id="disasterLocation">
                                <option>Alappuzha</option>
                                <option>Kottayam</option>
                                <option>Idukki</option>
                                <option>Wayanad</option>
                            </select>
                        </div>
                        <button class="btn" onclick="showDisasterHistory()">View History</button>
                        
                        <div id="disasterHistory" style="margin-top: 1rem; padding: 1rem; background-color: #f9f9f9; border-radius: 10px; display: none;">
                            <p><strong>2018 Floods:</strong> Severe damage to paddy fields</p>
                            <p><strong>2019 Landslides:</strong> Affected coffee plantations</p>
                            <p><strong>2020 Drought:</strong> Water scarcity for 3 months</p>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3><i class="fas fa-shield-alt"></i> Preventive Measures</h3>
                        <p style="margin-top: 1rem;"><strong>For Flood-Prone Areas:</strong></p>
                        <ul style="padding-left: 1.5rem; margin-top: 0.5rem;">
                            <li>Construct drainage channels</li>
                            <li>Raise seed beds</li>
                            <li>Plant flood-resistant varieties</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>For Drought-Prone Areas:</strong></p>
                        <ul style="padding-left: 1.5rem; margin-top: 0.5rem;">
                            <li>Drip irrigation systems</li>
                            <li>Drought-resistant crops</li>
                            <li>Rainwater harvesting</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Community Section -->
            <div id="communitySection" class="section">
                <h2>Community Dashboard</h2>
                <p>Connect with other farmers, ask questions, share experiences, and get advice from agricultural officers.</p>
                
                <div class="card" style="margin-bottom: 2rem;">
                    <h3>Create New Post</h3>
                    <div class="form-group">
                        <label>Post Type</label>
                        <select id="postType">
                            <option>Question</option>
                            <option>Crop Issue</option>
                            <option>Success Story</option>
                            <option>Market Info</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Visibility</label>
                        <select id="postVisibility">
                            <option>Public (All can see)</option>
                            <option>Private (Officials only)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Your Message</label>
                        <textarea id="postContent" rows="4" placeholder="Describe your issue or share information..."></textarea>
                    </div>
                    
                    <button class="btn" onclick="createPost()">Post to Community</button>
                </div>
                
                <h3>Recent Community Posts</h3>
                
                <div class="post">
                    <div class="post-header">
                        <div class="post-author">
                            <div class="badge farmer">Farmer</div>
                            <div>
                                <strong>Rajesh Kumar</strong>
                                <div style="font-size: 0.9rem; color: var(--gray);">Alappuzha • 2 hours ago</div>
                            </div>
                        </div>
                        <div class="badge">Crop Issue</div>
                    </div>
                    
                    <div class="post-content">
                        <p>Yellow spots appearing on paddy leaves. Anyone facing similar issue? What treatment should I use?</p>
                        <div style="margin-top: 0.5rem;">
                            <span class="badge" style="background-color: #e8f5e9; color: var(--dark-green);">#Paddy #Disease</span>
                        </div>
                    </div>
                    
                    <div class="post-actions">
                        <button class="action-btn"><i class="far fa-thumbs-up"></i> Helpful (3)</button>
                        <button class="action-btn"><i class="far fa-comment"></i> Reply (2)</button>
                    </div>
                </div>
                
                <div class="post">
                    <div class="post-header">
                        <div class="post-author">
                            <div class="badge official">Agri Officer</div>
                            <div>
                                <strong>Agricultural Department</strong>
                                <div style="font-size: 0.9rem; color: var(--gray);">Official • 1 day ago</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="post-content">
                        <p><strong>Subsidy Announcement:</strong> 50% subsidy on drip irrigation systems for small farmers. Apply before 30th November.</p>
                    </div>
                </div>
            </div>
            
            <!-- Business Platform Section -->
            <div id="businessSection" class="section">
                <h2>Business Platform</h2>
                <p>Buy and sell agricultural products, fertilizers, and lease land for farming.</p>
                
                <div class="dashboard">
                    <div class="card">
                        <h3><i class="fas fa-shopping-basket"></i> Buy Products</h3>
                        <div class="form-group" style="margin-top: 1rem;">
                            <label>Product Category</label>
                            <select id="productCategory">
                                <option>Fruits</option>
                                <option>Vegetables</option>
                                <option>Grains</option>
                                <option>Flowers</option>
                                <option>Fertilizers</option>
                                <option>Land Lease</option>
                            </select>
                        </div>
                        
                        <div id="productList" style="margin-top: 1rem;">
                            <div style="padding: 1rem; border-bottom: 1px solid #eee;">
                                <p><strong>Organic Rice</strong> - 100kg available</p>
                                <p><small>Price: ₹28/kg • Farmer: Suresh, Kottayam</small></p>
                                <button class="btn" style="padding: 0.5rem 1rem; font-size: 1rem; margin-top: 0.5rem;">Place Bid</button>
                            </div>
                            
                            <div style="padding: 1rem; border-bottom: 1px solid #eee;">
                                <p><strong>Coconut</strong> - 500 pieces available</p>
                                <p><small>Price: ₹35/piece • Farmer: Anitha, Alappuzha</small></p>
                                <button class="btn" style="padding: 0.5rem 1rem; font-size: 1rem; margin-top: 0.5rem;">Place Bid</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3><i class="fas fa-store"></i> Sell Products</h3>
                        <div class="form-group" style="margin-top: 1rem;">
                            <label>Sell as</label>
                            <select id="sellType">
                                <option>Farmer (Sell produce)</option>
                                <option>Business (Sell fertilizers/equipment)</option>
                                <option>Landowner (Lease land)</option>
                            </select>
                        </div>
                        
                        <div id="sellForm">
                            <div class="form-group">
                                <label>Product Name</label>
                                <input type="text" placeholder="e.g., Organic Rice, Urea Fertilizer">
                            </div>
                            
                            <div class="form-group">
                                <label>Quantity</label>
                                <input type="text" placeholder="e.g., 100kg, 5 acres">
                            </div>
                            
                            <div class="form-group">
                                <label>Price</label>
                                <input type="text" placeholder="₹ per unit">
                            </div>
                            
                            <button class="btn">List for Sale</button>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3><i class="fas fa-chart-bar"></i> Market Trends</h3>
                        <div style="margin-top: 1rem;">
                            <p><strong>High Demand:</strong> Organic vegetables, Coconut</p>
                            <p><strong>Stable Prices:</strong> Rice, Banana</p>
                            <p><strong>Growing Market:</strong> Spices, Medicinal plants</p>
                        </div>
                        
                        <div style="margin-top: 1.5rem;">
                            <h4>Your Transactions</h4>
                            <p><strong>Active Bids:</strong> 2</p>
                            <p><strong>Completed:</strong> 5 transactions</p>
                            <p><strong>Rating:</strong> 4.5/5 stars</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Emergency Section -->
            <div id="emergencySection" class="section">
                <h2>Emergency & Helplines</h2>
                
                <div class="alert warning">
                    <i class="fas fa-exclamation-circle"></i>
                    <div>In case of agricultural emergency or natural disaster, use these contacts immediately.</div>
                </div>
                
                <div class="dashboard">
                    <div class="card">
                        <h3><i class="fas fa-phone-alt"></i> Emergency Contacts</h3>
                        <div style="margin-top: 1rem;">
                            <p><strong>Disaster Management:</strong> 1077</p>
                            <p><strong>Agricultural Crisis:</strong> 0471-123456</p>
                            <p><strong>Police:</strong> 100</p>
                            <p><strong>Ambulance:</strong> 108</p>
                            <p><strong>Fire & Rescue:</strong> 101</p>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3><i class="fas fa-map-marker-alt"></i> Share Location</h3>
                        <p style="margin-top: 1rem;">In emergency, share your location with authorities:</p>
                        <button class="btn" style="margin-top: 1rem;" onclick="shareLocation()">
                            <i class="fas fa-location-arrow"></i> Share My Location
                        </button>
                        
                        <div id="locationStatus" style="margin-top: 1rem; padding: 1.2rem; background-color: #f1f8e9; border-radius: 10px; display: none;">
                            <p><strong>Location Shared!</strong></p>
                            <p>Latitude: 9.4981, Longitude: 76.3388</p>
                            <p>Nearest help center alerted.</p>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3><i class="fas fa-first-aid"></i> Emergency Guidelines</h3>
                        <ul style="padding-left: 1.5rem; margin-top: 1rem;">
                            <li>Move to higher ground during floods</li>
                            <li>Secure livestock and equipment</li>
                            <li>Keep important documents in waterproof bags</li>
                            <li>Have emergency kit ready (first aid, torch, radio)</li>
                            <li>Follow official evacuation orders</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Profile Section -->
            <div id="profileSection" class="section">
                <h2>User Profile</h2>
                <p>Update your information every 6 months to keep data current.</p>
                
                <div class="card" style="max-width: 600px;">
                    <h3>Personal Information</h3>
                    
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="profileName" value="John Farmer">
                    </div>
                    
                    <div class="form-group">
                        <label>Contact Number</label>
                        <input type="tel" id="profilePhone" value="9876543210">
                    </div>
                    
                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="email" id="profileEmail" value="farmer@example.com">
                    </div>
                    
                    <div class="form-group">
                        <label>District</label>
                        <select id="profileDistrict">
                            <option>Alappuzha</option>
                            <option>Kottayam</option>
                            <option>Idukki</option>
                            <option>Ernakulam</option>
                            <option>Thrissur</option>
                            <option>Palakkad</option>
                            <option>Wayanad</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Panchayat</label>
                        <input type="text" id="profilePanchayat" value="Kuttanad Panchayat">
                    </div>
                    
                    <!-- Farmer-specific fields -->
                    <div id="farmerProfileFields">
                        <h4 style="margin-top: 1.5rem;">Land Details</h4>
                        <div class="form-group">
                            <label>Total Land Area (acres)</label>
                            <input type="number" id="landArea" value="2.5">
                        </div>
                        
                        <div class="form-group">
                            <label>Survey Number</label>
                            <input type="text" id="surveyNo" value="123/456">
                        </div>
                        
                        <div class="form-group">
                            <label>Current Crops</label>
                            <input type="text" id="currentCrops" value="Rice, Coconut">
                        </div>
                    </div>
                    
                    <!-- Business-specific fields -->
                    <div id="businessProfileFields" style="display: none;">
                        <h4 style="margin-top: 1.5rem;">Business Details</h4>
                        <div class="form-group">
                            <label>Business Type</label>
                            <select id="businessType">
                                <option>Fertilizer Seller</option>
                                <option>Produce Buyer</option>
                                <option>Equipment Rental</option>
                                <option>Land Leasing</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>License Number</label>
                            <input type="text" id="licenseNo" value="KL08AB123456">
                        </div>
                    </div>
                    
                    <button class="btn" onclick="updateProfile()">Update Profile</button>
                    
                    <div style="margin-top: 2rem; padding-top: 1rem; border-top: 1px solid #eee;">
                        <p><strong>Last Updated:</strong> <span id="profileLastUpdate">2023-10-15</span></p>
                        <p><small style="color: var(--gray);">Next update due by: <span id="nextUpdateDue">2024-04-15</span></small></p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Chatbot -->
        <div class="chatbot-container">
            <div class="chatbot-btn" onclick="toggleChatbot()">
                <i class="fas fa-robot"></i>
            </div>
            
            <div id="chatbotWindow" class="chatbot-window">
                <div class="chatbot-header">
                    <div>
                        <h4>Krishi AI Assistant</h4>
                        <p style="font-size: 0.9rem;">Voice & Photo support available</p>
                    </div>
                    <button onclick="toggleChatbot()" style="background: none; border: none; color: white; cursor: pointer;">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="chatbot-messages" id="chatbotMessages">
                    <div class="message bot">
                        <p>Hello! I'm your Krishi AI Assistant. How can I help you today?</p>
                        <p style="margin-top: 0.5rem; font-size: 0.9rem;">You can ask about crops, diseases, weather, or upload a photo of your crop issue.</p>
                    </div>
                </div>
                
                <div class="chatbot-input">
                    <input type="text" id="chatInput" placeholder="Type your question...">
                    <button onclick="sendChatMessage()"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Application State
        let currentUser = null;
        let currentUserType = null;
        let currentSection = 'dashboard';
        
        // Demo data
        const demoUsers = {
            farmer: {
                name: "Rajesh Kumar",
                badge: "farmer",
                district: "Alappuzha",
                panchayat: "Kuttanad Panchayat",
                landArea: "2.5 acres",
                crops: ["Rice", "Coconut"]
            },
            business: {
                name: "Green Agro Traders",
                badge: "business",
                type: "Produce Buyer",
                license: "KL07CD789012"
            },
            citizen: {
                name: "Anitha Nair",
                badge: "citizen",
                district: "Kottayam"
            },
            official: {
                name: "Dr. Suresh Menon",
                badge: "official",
                role: "Agricultural Officer",
                department: "Agriculture Department, Kerala"
            }
        };
        
        // Initialize the application
        function initApp() {
            // Check if user is already logged in (from localStorage)
            const savedUser = localStorage.getItem('krishiMithramUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                currentUserType = currentUser.type;
                showApp();
            } else {
                showWelcomeScreen();
            }
            
            // Set up event listeners
            setupEventListeners();
        }
        
        // Show welcome screen
        function showWelcomeScreen() {
            document.getElementById('welcomeScreen').style.display = 'flex';
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('appContainer').style.display = 'none';
        }
        
        // Show login screen
        function showLoginScreen() {
            document.getElementById('welcomeScreen').style.display = 'none';
            document.getElementById('loginScreen').style.display = 'flex';
            document.getElementById('appContainer').style.display = 'none';
            selectUserType('farmer'); // Default selection
        }
        
        // Show main app
        function showApp() {
            document.getElementById('welcomeScreen').style.display = 'none';
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('appContainer').style.display = 'block';
            
            // Update UI with user info
            document.getElementById('userName').textContent = currentUser.name;
            document.getElementById('userBadge').textContent = currentUserType.charAt(0).toUpperCase() + currentUserType.slice(1);
            document.getElementById('userBadge').className = `badge ${currentUserType}`;
            
            // Show appropriate sections based on user type
            setupUserSpecificFeatures();
            
            // Show dashboard by default
            showSection('dashboard');
        }
        
        // Show feature info on welcome screen
        function showFeatureInfo(feature) {
            const featureInfo = {
                panchayat: "Interactive maps showing soil types, water availability, and crop suitability for each panchayat",
                crop: "AI-powered recommendations based on weather, soil conditions, and market demand",
                market: "Platform for farmers to sell produce and businesses to buy/sell agricultural products",
                disaster: "Real-time alerts for floods, landslides, and other natural disasters in Kerala",
                community: "Connect with other farmers and agricultural experts for advice and support",
                ai: "Voice-enabled chatbot that can diagnose crop issues from photos"
            };
            
            alert(`Feature: ${featureInfo[feature]}`);
        }
        
        // Change language on welcome screen
        function changeLanguage(lang) {
            // Remove active class from all language buttons
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Add active class to clicked button
            event.target.classList.add('active');
            
            // In a real app, this would change the language of the entire interface
            alert(`Language changed to ${lang === 'en' ? 'English' : lang === 'ml' ? 'Malayalam' : 'Hindi'}`);
        }
        
        // Select user type on login screen
        function selectUserType(type) {
            // Remove active class from all buttons
            document.querySelectorAll('.user-type-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Add active class to clicked button
            event.target.closest('.user-type-btn').classList.add('active');
            
            // Hide all forms
            document.querySelectorAll('.form-section').forEach(form => {
                form.style.display = 'none';
            });
            
            // Show selected form
            document.getElementById(`${type}Form`).style.display = 'block';
            
            // Set current user type
            currentUserType = type;
        }
        
        // Login function
        function login(type) {
            // In a real app, this would validate with backend
            // For prototype, we'll use demo data
            
            currentUser = demoUsers[type];
            currentUser.type = type;
            
            // Save to localStorage
            localStorage.setItem('krishiMithramUser', JSON.stringify(currentUser));
            
            // Show the app
            showApp();
            
            // Show welcome message
            setTimeout(() => {
                alert(`Welcome to Krishi Mithram, ${currentUser.name}!`);
            }, 500);
        }
        
        // Logout function
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                localStorage.removeItem('krishiMithramUser');
                currentUser = null;
                currentUserType = null;
                showWelcomeScreen();
            }
        }
        
        // Show different sections
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.style.display = 'none';
            });
            
            // Remove active class from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(`${sectionId}Section`).style.display = 'block';
            
            // Add active class to clicked nav item
            event.target.closest('.nav-item').classList.add('active');
            
            // Update current section
            currentSection = sectionId;
        }
        
        // Show profile section
        function showProfile() {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.style.display = 'none';
            });
            
            // Remove active class from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show profile section
            document.getElementById('profileSection').style.display = 'block';
            
            // Populate profile data
            populateProfileData();
        }
        
        // Populate profile data
        function populateProfileData() {
            if (!currentUser) return;
            
            // Set basic info
            document.getElementById('profileName').value = currentUser.name;
            document.getElementById('profileEmail').value = `${currentUserType}@example.com`;
            document.getElementById('profilePhone').value = '9876543210';
            
            // Show/hide user-specific fields
            if (currentUserType === 'farmer') {
                document.getElementById('farmerProfileFields').style.display = 'block';
                document.getElementById('businessProfileFields').style.display = 'none';
                
                // Set farmer-specific data
                document.getElementById('landArea').value = currentUser.landArea || '2.5';
                document.getElementById('currentCrops').value = Array.isArray(currentUser.crops) ? currentUser.crops.join(', ') : currentUser.crops || '';
            } else if (currentUserType === 'business') {
                document.getElementById('farmerProfileFields').style.display = 'none';
                document.getElementById('businessProfileFields').style.display = 'block';
                
                // Set business-specific data
                document.getElementById('businessType').value = currentUser.type || 'Produce Buyer';
                document.getElementById('licenseNo').value = currentUser.license || '';
            } else {
                document.getElementById('farmerProfileFields').style.display = 'none';
                document.getElementById('businessProfileFields').style.display = 'none';
            }
            
            // Set last update date (demo)
            const lastUpdate = new Date();
            lastUpdate.setMonth(lastUpdate.getMonth() - 2); // 2 months ago
            document.getElementById('profileLastUpdate').textContent = lastUpdate.toISOString().split('T')[0];
            document.getElementById('lastUpdate').textContent = lastUpdate.toISOString().split('T')[0];
            
            // Set next update date (6 months from last update)
            const nextUpdate = new Date(lastUpdate);
            nextUpdate.setMonth(nextUpdate.getMonth() + 6);
            document.getElementById('nextUpdateDue').textContent = nextUpdate.toISOString().split('T')[0];
        }
        
        // Update profile
        function updateProfile() {
            // Get updated values
            const updatedName = document.getElementById('profileName').value;
            const updatedEmail = document.getElementById('profileEmail').value;
            const updatedPhone = document.getElementById('profilePhone').value;
            
            // Update current user
            currentUser.name = updatedName;
            
            // Update localStorage
            localStorage.setItem('krishiMithramUser', JSON.stringify(currentUser));
            
            // Update UI
            document.getElementById('userName').textContent = updatedName;
            
            // Show success message
            alert('Profile updated successfully!');
            
            // Update last update date
            const today = new Date();
            document.getElementById('profileLastUpdate').textContent = today.toISOString().split('T')[0];
            document.getElementById('lastUpdate').textContent = today.toISOString().split('T')[0];
            
            // Calculate next update date
            const nextUpdate = new Date(today);
            nextUpdate.setMonth(nextUpdate.getMonth() + 6);
            document.getElementById('nextUpdateDue').textContent = nextUpdate.toISOString().split('T')[0];
            
            // Go back to dashboard
            showSection('dashboard');
        }
        
        // Setup user-specific features
        function setupUserSpecificFeatures() {
            if (currentUserType === 'official') {
                // Show edit option in panchayat mapping for officials
                document.getElementById('editPanchayatData').style.display = 'block';
            }
        }
        
        // Load panchayat data
        function loadPanchayatData() {
            const selectedPanchayat = document.getElementById('panchayatSelect').value;
            let data = {};
            
            // Demo data for different panchayats
            switch(selectedPanchayat) {
                case 'alappuzha':
                    data = {
                        soil: "Alluvial soil",
                        water: "High (Riverine area)",
                        crops: "Rice, Coconut, Banana",
                        fertility: "High",
                        rainfall: "3000mm annually"
                    };
                    break;
                case 'kuttanad':
                    data = {
                        soil: "Clayey soil",
                        water: "Very High (Below sea level)",
                        crops: "Rice, Fish farming",
                        fertility: "Very High",
                        rainfall: "3200mm annually"
                    };
                    break;
                case 'wayanad':
                    data = {
                        soil: "Laterite soil",
                        water: "Medium (Hilly region)",
                        crops: "Coffee, Pepper, Tea",
                        fertility: "Medium",
                        rainfall: "2500mm annually"
                    };
                    break;
                case 'palakkad':
                    data = {
                        soil: "Black soil",
                        water: "Low (Dry region)",
                        crops: "Sugarcane, Coconut, Mango",
                        fertility: "Medium",
                        rainfall: "2000mm annually"
                    };
                    break;
            }
            
            // Update UI
            document.getElementById('panchayatData').innerHTML = `
                <p><strong>Soil Type:</strong> ${data.soil}</p>
                <p><strong>Water Availability:</strong> ${data.water}</p>
                <p><strong>Primary Crops:</strong> ${data.crops}</p>
                <p><strong>Fertility Level:</strong> ${data.fertility}</p>
                <p><strong>Rainfall Pattern:</strong> ${data.rainfall}</p>
            `;
        }
        
        // Get crop recommendation from AI
        function getCropRecommendation() {
            const landType = document.getElementById('landType').value;
            const soilType = document.getElementById('soilTypeSelect').value;
            const waterAvail = document.getElementById('waterAvail').value;
            
            // Simple logic for demo
            let recommendedCrop = "Rice";
            let reason = "Suitable for current conditions";
            
            if (landType === "Wetland" && waterAvail === "High (River/Canal)") {
                recommendedCrop = "Rice";
                reason = "Ideal for wetland with high water availability";
            } else if (landType === "Dryland" && waterAvail === "Low (Rainfed only)") {
                recommendedCrop = "Millets";
                reason = "Drought-resistant crops suitable for dryland farming";
            } else if (landType === "Garden Land") {
                recommendedCrop = "Vegetables";
                reason = "Garden land with medium water availability perfect for vegetables";
            } else if (landType === "Hilly Area") {
                recommendedCrop = "Coffee/Pepper";
                reason = "Hilly terrain suitable for plantation crops";
            }
            
            // Update UI
            document.getElementById('recommendedCrop').textContent = recommendedCrop;
            document.getElementById('recommendationReason').textContent = reason;
            document.getElementById('aiRecommendation').style.display = 'block';
            
            // Scroll to recommendation
            document.getElementById('aiRecommendation').scrollIntoView({ behavior: 'smooth' });
        }
        
        // Show disaster history
        function showDisasterHistory() {
            document.getElementById('disasterHistory').style.display = 'block';
        }
        
        // Create community post
        function createPost() {
            const postType = document.getElementById('postType').value;
            const visibility = document.getElementById('postVisibility').value;
            const content = document.getElementById('postContent').value;
            
            if (!content.trim()) {
                alert('Please enter post content');
                return;
            }
            
            alert(`Post created successfully! ${visibility === 'Private (Officials only)' ? 'Sent to officials.' : 'Posted to community.'}`);
            document.getElementById('postContent').value = '';
        }
        
        // Share location in emergency
        function shareLocation() {
            document.getElementById('locationStatus').style.display = 'block';
            
            // Simulate API call
            setTimeout(() => {
                alert('Location shared with emergency services. Help is on the way.');
            }, 1000);
        }
        
        // Chatbot functions
        function toggleChatbot() {
            const chatbot = document.getElementById('chatbotWindow');
            chatbot.style.display = chatbot.style.display === 'flex' ? 'none' : 'flex';
            
            // Focus on input when opening
            if (chatbot.style.display === 'flex') {
                setTimeout(() => {
                    document.getElementById('chatInput').focus();
                }, 100);
            }
        }
        
        function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message
            addChatMessage(message, 'user');
            
            // Clear input
            input.value = '';
            
            // Simulate AI response after delay
            setTimeout(() => {
                const aiResponse = getAIResponse(message);
                addChatMessage(aiResponse, 'bot');
            }, 1000);
        }
        
        function addChatMessage(text, sender) {
            const messagesDiv = document.getElementById('chatbotMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            messageDiv.innerHTML = `<p>${text}</p>`;
            messagesDiv.appendChild(messageDiv);
            
            // Scroll to bottom
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }
        
        function getAIResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            if (lowerMessage.includes('paddy') || lowerMessage.includes('rice')) {
                return "For paddy cultivation, ensure proper water management. During monsoon, use resistant varieties like Jyothi or Uma. For disease control, use Tricyclazole for blast disease.";
            } else if (lowerMessage.includes('weather') || lowerMessage.includes('rain')) {
                return "Current monsoon season brings heavy rainfall. Expect 250-300mm this week. Suitable for rice transplantation. Keep drainage channels clear.";
            } else if (lowerMessage.includes('disease') || lowerMessage.includes('yellow')) {
                return "Yellow spots on leaves could indicate bacterial leaf blight. Apply Copper Oxychloride 0.3% solution. Remove infected plants to prevent spread.";
            } else if (lowerMessage.includes('price') || lowerMessage.includes('market')) {
                return "Current market rates: Rice ₹28-32/kg, Coconut ₹30-36/piece, Banana ₹20-25/kg. Prices expected to rise by 5-10% next month.";
            } else if (lowerMessage.includes('subsidy') || lowerMessage.includes('government')) {
                return "Government subsidies available: 50% on drip irrigation, 40% on polyhouses, 30% on organic fertilizers. Contact your agricultural officer for application.";
            } else if (lowerMessage.includes('hello') || lowerMessage.includes('hi')) {
                return "Hello! I'm Krishi Mithram AI Assistant. How can I help you with your agricultural queries today?";
            } else {
                return "Thank you for your question. For specific crop advice, please provide more details or upload a photo of the affected plant.";
            }
        }
        
        // Open chatbot from dashboard
        function openChatbot() {
            toggleChatbot();
        }
        
        // Setup event listeners
        function setupEventListeners() {
            // Enter key in chatbot
            document.getElementById('chatInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendChatMessage();
                }
            });
            
            // Demo data initialization
            if (!localStorage.getItem('panchayatData')) {
                const demoPanchayatData = {
                    alappuzha: {
                        soil: "Alluvial soil",
                        water: "High",
                        crops: "Rice, Coconut, Banana",
                        fertility: "High",
                        rainfall: "3000mm"
                    }
                };
                localStorage.setItem('panchayatData', JSON.stringify(demoPanchayatData));
            }
        }
        
        // Initialize app when page loads
        window.onload = initApp;
    </script>
</body>
</html>
